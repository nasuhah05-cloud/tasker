#**TUTORIAL INSTALASI EPRINTS 3.4.5 DI DEBIAN**

##1. Update Sistem 
  `sudo apt update`
  `sudo apt upgrade -y` 

##2. Instalasi Apache Web Server
  `sudo apt install apache2 -y` 
  `sudo systemctl status apache2`

##3. Instalasi Dependensi 

a. Instalasi Build Tools dan Library
  `sudo apt install wget curl build-essential libxml2-dev libgd-dev libapache2-mod-perl2 git -y`

b. Instalasi Perl dan Modul Inti 
  `sudo apt install perl libperl-dev cpanminus -y`

c. Istalasi Dependensi Modul Perl 
  `sudo apt install libxml-libxml-perl libxml-sax-perl libxml-parser-perl \`
  `libterm-readkey-perl libunicode-string-perl libmime-lite-perl \`
  `libmime-types-perl libdigest-sha-perl libdbi-perl libdbd-mysql-perl \`
  `libtext-unidecode-perl libjson-perl libdata-dumper-simple-perl \`
  `libsearch-xapian-perl libio-string-perl liblingua-stem-perl -y`

d. Instalasi Modul Perl Tambahan 
  `sudo cpanm CGI`
  `sudo cpanm XML::LibXSLT`
  `sudo cpanm Archive::Zip`
  `sudo cpanm MIME::Base64`

##4. Instalasi EPrints 

a. Masuk ke Direktori
  `cd/opt` 

b. Download EPrints 3.4.5 
  `sudo wget https://github.com/eprints/eprints3.4/archive/refs/tags/v3.4.5.tar.gz`

c. Ekstrak File 
  `sudo tar -xzf v3.4.5.tar.gz`

d. Rename Direktori
  `sudo mv eprints3.4.3.4.5 eprints3`

e. Verifikasi Instalasi 
  `ls -l | grep eprints3` 

f. Masuk ke Direktori EPrints 
  `cd eprints3` 

##5. User EPrints dan Set Permission 
  `sudo useradd -r -d /opt/eprints3 eprints` 
  `sudo chown -R eprints:eprints /opt/eprints3`
  `ls -l | grep eprints3` 
  `ls -la /eprints3/bin/ | grep epadmin`

##6. Setup Password Root MariaDB

a. Masuk ke MariaDB 
  `MariaDB`

b. Jalankan Perintah Berikut!
  `ALTER USER 'root'@'localhost' IDENTIFIED BY 'PasswordBaru123!';`
  `FLUSH PRIVILEGES;`
  `GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION;`
  `FLUSH PRIVILEGES;`
  `EXIT;`

c. Test Password 
  `mysql -u root -p` 

##7. Repository EPrints 

a. Pindah ke User EPrints 
  `sudo su - eprints`

b. Masuk ke Direktori EPrints 
  `cd /opt/eprints3` 

c. Jalankan Wizard Pembuatan Repository 
  `./bin/epadmin create pub` 

d. Jawaban Konfigurasi Wizard 
   | **Pertanyaan**             |   **Jawaban**                                 |  
   | Archive id?                |   Eprints1                                    |
   | Configure vital settings?  |   yes                                         | 
   | Hostname?                  |   eprints.local                               |
   | webserver port             |   80                                          |   
   | alias?                     |   ( tekan enter)                              |
   | path?                      |   /                                           |  
   | HTTPS Hostname?            |   ( Tekkan enter)                             |  
   | administrator email?       |   dechriv@gmail.com (menggunakan email anda)  |
   | Archive name?              |   test repository                             |
   | organisation name?         |   UIN Jakarta                                 |
   | Configure database?        |   yes                                         |
   | database name?             |   Eprints1                                    |
   | Mysql Host?                |   local host                                  |
   | Mysql Port?                |   # (untuk no setting)                        |   
   | Mysql Socket?              |   # (untuk no setting)                        |
   | database user?             |   Eprints1                                    |  
   | database password?         |   (masukkan password)                         |
   | database engine?           |   innodb                                      |
   | write these database?      |   yes                                         |
   | create database eprints1?  |   yes                                         |
   | database superuser username|   root                                        |
   | database superuser password|   (masukkan password root mysql)              |
   | create database tables?    |   yes                                         |
   | create an intial user?     |   yes                                         |
   | enter a username           |   vani                                        |
   | select a user type?        |   admin                                       |
   | enter password?            |   (buatlah password admin)                    |
   | email?                     |   dechriv@gmail.com (gunakan email anda)      |
   | build static web pages     |   yes                                         |
   | import loc sbjects         |   yes                                         |
   | update apache config files |   yes                                         |

##8. Konfigurasi Nano Apache 
  a. `sudo nano /etc/apache2/apache2.conf`

   tambahkan syntax di bagian baris terakhir: 
     `include /opt/eprints3/cfg/apache.conf`

   kemudian ditambahkan lagi di bawahnya:
     `ServerName localhost`

   kemudian tekan CTRL O untuk save tekan enter dan untuk keluar tekan CTRL X

 b. `sudo su - eprints` 
    `cd/opt/eprints3`
    `./bin/generate_apacheconf Eprints1`

 c. `sudo cp /opt/eprints3/cfg/apache/Eprints1.conf /etc/apache2/sites-available/eprints.conf`
    `sudo a2ensite eprints.conf`
    `sudo systemctl restart apache2`
    `sudo systemctl status apache2`

##9. Testing buka web eprints
    setelah konfigurasi apache selesai. bisa buka browser untuk mengecek apakah instalisasi berhasil atau tidak di 
    `http://eprints.local`

![alt text](eprints_done.jpeg)

